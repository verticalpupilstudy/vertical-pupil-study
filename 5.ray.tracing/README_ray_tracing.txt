
Ray-tracing files for Beam4 simulations + calculations 

---

Purpose

This folder contains all inputs, outputs, and helper scripts used to perform ray tracing on a domestic cat schematic eye, evaluating effective light collection across incident angles, pupil shapes, and constriction levels.

---

File Descriptions

Inputs

- domestic.cat.eye.model.OPT: Base schematic eye file, modelled in Beam4.
- Chief_Rays.RAY: Beam4-formatted file containing chief rays only. Run this file in Beam4 to compute X1, Z1, Y1 intersection coordinates at the anterior corneal surface. Results are mirrored in Chief_Rays.xlsx.
- Ray_Tracing_Main.RAY: Master Beam4 ray file including rays for:
  - Vertical and round pupils  
  - Five constriction levels  
  - 19 incident angles (0° to 80°)  
  Each ray simulates the extreme nasal, temporal, superior, and inferior boundary rays at various pupil levels and angles.
- Ray_Tracing_Main.xlsx: Reference spreadsheet matching each ray in Ray_Tracing_Main.RAY to its pupil shape, angle, and constriction level. Once Beam4 is run, X1, Z1, Y1 intersection data is populated here.
- Vertical/Round Pupil Diameter.xlsx: Pupil width and height (in mm) for round and vertical pupils across constriction levels. Use this to modify pupil dimensions in Beam4 by adjusting Dx, Dy. 

Outputs

Generated by the R script taytracing.pupil.dimensions.R:

- Lens_Metrics_by_Angle.csv: Effective aperture area (mm²) for each pupil shape, angle, and constriction level.
- Vertical_vs_Round_Differences.csv: Summarised differences in aperture area between vertical and round pupils, highlighting conditions where vertical pupils outperform.

---

Workflow Summary 

Note: Beam4 (optical modeling software which can be downloaded for free) is required to run .RAY files and generate ray intersection data. Beam4 must be installed and used to simulate the schematic eye model.

1. Run Ray_Tracing_Main.RAY and open domestic.cat.eye.model.OPT in Beam4 to simulate all rays and record X1, Z1, Y1 intersection points corresponding to different pupil dimensions found in vertical.round.diameters.xlsv
Note: Pupil diameter (horizontal/vertical) can be adjusted by changing  Dx, Dy on Iris row on Beam4
2. Run Chief_Rays.RAY for reference chief ray data.
3. Enter coordinates of X1,Y1, Z1 intersection points into Ray_Tracing_Main.xlsx and Chief_Rays.xlsx.
4. Run raytracing.pupil.dimensions.R to calculate effective aperture widths and areas based on the intersection points.
